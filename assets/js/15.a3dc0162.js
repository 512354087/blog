(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{647:function(n,s,e){"use strict";e.r(s);var t=e(76),a=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[n._v("#")]),n._v(" 前言")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("  实用的自定义hooks\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("h2",{attrs:{id:"usecountdown"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecountdown"}},[n._v("#")]),n._v(" useCountdown")]),n._v(" "),s("p",[n._v("一个接收后端传来的 seconds 并做倒计时的功能，很多页面都用到，很容易写出来，但减少了很多模板代码")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import {useEffect, useState} from 'react'\n\nconst useCountdown = (): { countdown: number, setCountdown: (seconds: number) => void } => {\n\n    const [countdown, setCountdown] = useState<number>(0)\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            if (countdown > 0) {\n                setCountdown(countdown - 1)\n            } else if (countdown === 0) {\n                clearInterval(interval)\n            }\n        }, 1000)\n        return () => {\n            clearInterval(interval)\n        }\n    }, [countdown])\n\n    return {\n        countdown,\n        setCountdown\n    }\n}\n\nexport default useCountdown\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br")])]),s("h2",{attrs:{id:"监听页面大小变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听页面大小变化"}},[n._v("#")]),n._v(" 监听页面大小变化")]),n._v(" "),s("p",[n._v("效果：在组件调用 useWindowSize 时，可以拿到页面大小，并且在浏览器缩放时自动触发组件更")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import React, { useEffect, useState } from 'react';\n \nfunction getSize() {\n  return {\n    innerHeight: window.innerHeight,\n    innerWidth: window.innerWidth,\n    outerHeight: window.outerHeight,\n    outerWidth: window.outerWidth,\n  };\n}\n \nfunction useWindowSize() {\n  const [windowSize, setWindowSize] = useState(getSize());\n \n  function handleResize() {\n    setWindowSize(getSize());\n  }\n \n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n \n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return windowSize;\n}\n \nexport default function Demo() {\n  const windowSize = useWindowSize();\n  return <div>页面宽度{windowSize.innerWidth}</div>;\n}\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br")])]),s("h2",{attrs:{id:"拿到组件-onchange-抛出的值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拿到组件-onchange-抛出的值"}},[n._v("#")]),n._v(" 拿到组件 onChange 抛出的值")]),n._v(" "),s("p",[n._v("效果：通过 useInputValue() 拿到 Input 框当前用户输入的值，而不是手动监听 onChange 再腾一个 otherInputValue 和一个回调函数把这一堆逻辑写在无关的地方。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import React, { useState, useCallback } from 'react';\n \nfunction useInputValue(initialValue) {\n  const [value, setValue] = useState(initialValue);\n  const onChange = useCallback(function(e) {\n    setValue(e.currentTarget.value);\n  }, []);\n  return {\n    value,\n    onChange,\n  };\n}\n \nexport default function Demo() {\n  const name = useInputValue('jjsun');\n  return (\n    <>\n      {name.value}\n      <input {...name} />\n    </>\n  );\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br")])]),s("h2",{attrs:{id:"usedocumenttitle-用于更新页面标题。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usedocumenttitle-用于更新页面标题。"}},[n._v("#")]),n._v(" useDocumentTitle 用于更新页面标题。")]),n._v(" "),s("p",[n._v("官方文档:"),s("a",{attrs:{href:"https://github.com/rehooks/document-title",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://github.com/rehooks/document-title"),s("OutboundLink")],1)]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import useDocumentTitle from '@rehooks/document-title';\n\nexport default () => {\n  useDocumentTitle('Page Title');\n  return <div />;\n};\n\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br")])]),s("h2",{attrs:{id:"useonlinestatus-用于获取当前的网络状态，内部通过监听-online-及-offline-事件实现。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useonlinestatus-用于获取当前的网络状态，内部通过监听-online-及-offline-事件实现。"}},[n._v("#")]),n._v(" useOnlineStatus 用于获取当前的网络状态，内部通过监听 online 及 offline 事件实现。")]),n._v(" "),s("p",[n._v("官方文档:"),s("a",{attrs:{href:"https://github.com/rehooks/online-status",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://github.com/rehooks/online-status"),s("OutboundLink")],1)]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import useOnlineStatus from '@rehooks/online-status';\n\nexport default () => {\n  const onlineStatus = useOnlineStatus();\n  return (\n    <div>\n      <h1>You are {onlineStatus ? 'Online' : 'Offline'}</h1>\n    </div>\n  );\n};\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])]),s("h2",{attrs:{id:"usenetworkstatus-暴露了navigator-connection-对象，用于实时获取网络状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usenetworkstatus-暴露了navigator-connection-对象，用于实时获取网络状态"}},[n._v("#")]),n._v(" useNetworkStatus 暴露了navigator.connection 对象，用于实时获取网络状态")]),n._v(" "),s("p",[n._v("官方文档:"),s("a",{attrs:{href:"https://github.com/rehooks/network-status",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://github.com/rehooks/network-status"),s("OutboundLink")],1)]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("import useNetworkStatus from '@rehooks/network-status';\n\nexport default () => {\n  let connection = useNetworkStatus();\n  return (\n    <div>\n      <div>downlink: {connection.downlink}</div>\n      <div>effectiveType: {connection.effectiveType}</div>\n      <div>rtt: {connection.rtt}</div>\n      <div>saveData: {connection.saveData ? 'yes' : 'no'}</div>\n    </div>\n  );\n};\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br")])])])}),[],!1,null,null,null);s.default=a.exports}}]);