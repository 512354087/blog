(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{683:function(s,e,t){"use strict";t.r(e);var a=t(76),n=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"前提"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提"}},[s._v("#")]),s._v(" 前提")]),s._v(" "),e("p",[s._v("通过 npm run "),e("commander",[s._v(" 可以运行 package.json 中脚本，Npm 命令不能提供立即运行多个脚本的方式，同时运行需要打开多个终端窗口")])],1),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('   踩坑一:\n   "dev": "node scripts/start.js && node scripts/server.js"\n   这种写法是错误的\n   一个终端窗口只能起一个node服务\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"npm-scripts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-scripts"}},[s._v("#")]),s._v(" npm scripts")]),s._v(" "),e("ul",[e("li",[s._v("node_modules/.bin 目录下的命令，可以直接在 scripts 中调用")]),s._v(" "),e("li",[s._v("利用一些脚本生命周期时间")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  "scripts": {\n    "preinstall": "./configure",\n    "install": "make && make install"\n  }\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ul",[e("li",[s._v("可以通过 process.env.npm"),e("em",[s._v("package_scripts")]),e("commander",[s._v(" 查看 scripts 中的命令情况")])],1)]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  "scripts": {\n    "test": "node test.js"\n  }\n  process.env.npm_package_scripts_test === \'node test.js\'\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("npm run 从根目录运行，不管调用的当前目录是什么（process.env.PWD 一直指向根目录）。可以通过 process.env.INIT_CWD 获得所处的完整路径。")])]),s._v(" "),e("li",[e("p",[s._v("清除缓存")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("  $ npm cache clean --force\n  $ yarn cache clean\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"下述通过-bash-来实现的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下述通过-bash-来实现的"}},[s._v("#")]),s._v(" 下述通过 Bash 来实现的")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(' "scripts": {\n    "deploy": "vue-cli-service build & vue-cli-service build screen && node deploy.js"\n  }\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("期望： 并发执行 vue-cli-service build 和 vue-cli-service build screen ；执行完后再执行 node deploy.js\n实际： 并发执行 vue-cli-service build 和 vue-cli-service build screen && node deploy.js")]),s._v(" "),e("h2",{attrs:{id:"示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1.js\n #!/usr/bin/env node\n  setTimeout(() => {\n    console.log('1')\n  }, 6000)\n\n2.js\n\nsetTimeout(() => {\n  console.log('2')\n}, 3000)\n\n3.js\nsetTimeout(() => {\n  console.log('3')\n}, 1000)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"管道符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#管道符"}},[s._v("#")]),s._v(" 管道符")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[s._v("命令")]),s._v(" "),e("th",{staticStyle:{"text-align":"center"}},[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("&&")]),s._v(" "),e("td",{staticStyle:{"text-align":"center"}},[s._v("顺序执行多条命令，当碰到执行出错的命令后将不执行后面的命令")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("&")]),s._v(" "),e("td",{staticStyle:{"text-align":"center"}},[s._v("并行执行多条命令")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("||")]),s._v(" "),e("td",{staticStyle:{"text-align":"center"}},[s._v("顺序执行多条命令，当碰到执行正确的命令后将不执行后面的命令")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[s._v("|")]),s._v(" "),e("td",{staticStyle:{"text-align":"center"}},[s._v("顺序执行多条命令，当碰到执行正确的命令后将不执行后面的命令")])])])]),s._v(" "),e("h2",{attrs:{id:""}},[e("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")]),s._v(" &&")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  "scripts": {\n    "test": "node ./build/1.js && node ./build/2.js && node ./build/3.js"\n  }\n  顺序执行多条命令，输出结果：1 2 3\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[s._v("#")]),s._v(" &")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(' "scripts": {\n    "test": "node ./build/1.js & node ./build/2.js & node ./build/3.js"\n  }\n  并行执行多条命令，输出结果：3 2 1\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[s._v("#")]),s._v(" ||")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  "scripts": {\n  test": "node ./build/1.js || node ./build/2.js || node ./build/3.js"\n}\n输出结果：1\n执行正确后不会执行后面的命令，何谓成功or失败呢？\n\nBash：成功 exit 0；失败（非0） exit 1\n\nNodejs：成功 process.exit(0)；失败（非0） process.exit(1)\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("注意，上述在 window 下不能生效！")]),s._v(" "),e("h2",{attrs:{id:"concurrently"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#concurrently"}},[s._v("#")]),s._v(" concurrently")]),s._v(" "),e("p",[s._v("跨平台，同时运行多个命令（并发）。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"scripts": {\n\t"test": "concurrently \\"node ./build/1.js\\" \\"node ./build/2.js\\" \\"node ./build/3.js\\""\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("并行执行多条命令，输出结果：3 2 1")]),s._v(" "),e("p",[s._v("只能并行，不能顺序执行！")])])}),[],!1,null,null,null);e.default=n.exports}}]);