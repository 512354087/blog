(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{715:function(s,e,n){"use strict";n.r(e);var a=n(76),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"大文件上传"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#大文件上传"}},[s._v("#")]),s._v(" 大文件上传")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("分片上传")])]),s._v(" "),e("li",[e("p",[s._v("压缩上传")]),s._v(" "),e("p",[s._v("jszip 和 pako 在于算法的不同 不同的压缩算法 压缩比 和 压缩效率不同")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import pako from 'pako'\nimport { saveFileBlob } from './downLoad'\nexport const compressFile = (file) =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = async (event) => {\n      const compressedData = pako.gzip(event.target.result)\n      const compressedFile = new File([compressedData], file.name, { type: file.type })\n      saveFileBlob(new Blob([compressedData]), `压缩${file.name}`)\n      await decompressFile(compressedFile)\n      resolve(compressedFile)\n    }\n\n    reader.onerror = (event) => {\n      reject(event.target.error)\n    }\n\n    reader.readAsArrayBuffer(file)\n  })\n\n\n\nexport const decompressFile = (file) =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = (event) => {\n      const compressedData = pako.ungzip(event.target.result)\n      const compressedFile = new File([compressedData], file.name, { type: file.type })\n      saveFileBlob(new Blob([compressedData]), `解压${file.name}`)\n      resolve(compressedFile)\n    }\n\n    reader.onerror = (event) => {\n      reject(event.target.error)\n    }\n\n    reader.readAsArrayBuffer(file)\n})\n\n// 保存\nexport const saveFileBlob = (blob: Blob, fileName: string) => {\n  let filename = fileName\n  // @ts-ignore\n  if (typeof window.navigator.msSaveBlob !== 'undefined') {\n    // IE\n    // @ts-ignore\n    window.navigator.msSaveBlob(blob, filename)\n  } else {\n    let aTag = document.createElement('a')\n    // @ts-ignore\n    let url = window.URL.createObjectURL(blob)\n    aTag.href = url\n    aTag.download = fileName.replace(new RegExp('\"', 'g'), '')\n    aTag.click()\n    window.URL.revokeObjectURL(url)\n  }\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br")])]),e("h2",{attrs:{id:"url-下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#url-下载"}},[s._v("#")]),s._v(" url 下载")]),s._v(" "),e("h2",{attrs:{id:"bolb-下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bolb-下载"}},[s._v("#")]),s._v(" bolb 下载")]),s._v(" "),e("h2",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),e("h3",{attrs:{id:"浏览器同源政策-跨域-url-无法下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器同源政策-跨域-url-无法下载"}},[s._v("#")]),s._v(" 浏览器同源政策 跨域 url 无法下载")])])}),[],!1,null,null,null);e.default=r.exports}}]);