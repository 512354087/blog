(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{720:function(n,s,a){"use strict";a.r(s);var t=a(76),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"起步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#起步"}},[n._v("#")]),n._v(" 起步")]),n._v(" "),s("h3",{attrs:{id:"文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[n._v("#")]),n._v(" 文档")]),n._v(" "),s("p",[n._v("[plugin-qiankun] (https://umijs.org/plugins/plugin-qiankun)")]),n._v(" "),s("h3",{attrs:{id:"二级菜单问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二级菜单问题"}},[n._v("#")]),n._v(" 二级菜单问题")]),n._v(" "),s("h2",{attrs:{id:"主应用路由配置-microapp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主应用路由配置-microapp"}},[n._v("#")]),n._v(" 主应用路由配置 microApp")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v(" {\n  path: '/setting',\n  authority: ['USER_ORG'],\n  microApp: 'privilege',\n},\n/* 员工及权限设置 */\n{\n  path: '/setting',\n  name: 'setting',\n  icon: 'iconyuangongjiquanxianguanli',\n  authority: ['SET_UP'],\n  routes: [\n    {\n      path: '/setting/organization',\n      name: 'organization',\n      authority: ['USER_ORG'],\n    },\n    {\n      path: '/setting/userAuth',\n      name: 'userAuthList',\n      authority: ['AUTH_MANAGE'],\n    },\n    {\n      path: '/setting/jobManage',\n      name: 'jobManage',\n      authority: ['POS_LVL_MANAGE'],\n    }\n  ],\n},\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br")])]),s("h3",{attrs:{id:"message-modal-在子应用无法关闭问题-子应用-app-tsx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#message-modal-在子应用无法关闭问题-子应用-app-tsx"}},[n._v("#")]),n._v(" message modal 在子应用无法关闭问题 (子应用 app.tsx)")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("  import React from 'react';\nimport { message } from 'antd';\nimport type { Settings as LayoutSettings } from '@ant-design/pro-layout';\nimport { PageLoading } from '@ant-design/pro-layout';\nimport { ConfigProvider } from 'antd';\nimport type { RunTimeLayoutConfig } from 'umi';\nimport RightContent from '@/components/RightContent';\n\n/** 获取用户信息比较慢的时候会展示一个 loading */\nexport const initialStateConfig = {\n loading: <PageLoading />,\n};\n\n/**\n* @see  https://umijs.org/zh-CN/plugins/plugin-initial-state\n* */\nexport async function getInitialState(): Promise<{\n settings?: Partial<LayoutSettings>;\n currentUser?: API.CurrentUser;\n fetchUserInfo?: () => Promise<API.CurrentUser | undefined>;\n}> {\n // const fetchUserInfo = async () => {\n //   try {\n //     const currentUser = await queryCurrentUser();\n //     return currentUser;\n //   } catch (error) {\n //     history.push('/user/login');\n //   }\n //   return undefined;\n // };\n // // 如果是登录页面，不执行\n // if (history.location.pathname !== '/user/login') {\n //   const currentUser = await fetchUserInfo();\n //   return {\n //     fetchUserInfo,\n //     currentUser,\n //     settings: {},\n //   };\n // }\n return {\n   // fetchUserInfo,\n   settings: {},\n };\n}\n\n// https://umijs.org/zh-CN/plugins/plugin-layout\nexport const layout: RunTimeLayoutConfig = ({ initialState }) => {\n return {\n   rightContentRender: () => <RightContent />,\n   disableContentMargin: false,\n   // footerRender: () => <Footer />,\n   menuHeaderRender: undefined,\n   ...initialState?.settings,\n };\n};\n\nlet containerPros: any = {};\n\nexport const qiankun = {\n // 应用加载之前\n async bootstrap(props: any) {\n   console.log('app1 bootstrap', props);\n },\n // 应用 render 之前触发\n async mount(props: any) {\n   containerPros = props;\n   console.log('app1 mount', props);\n },\n // 应用卸载之后触发\n async unmount(props: any) {\n   console.log('app1 unmount', props);\n },\n};\n\nexport function rootContainer(container: any) {\n const { container: mountContainer } = containerPros;\n const mountDOM = mountContainer\n   ? mountContainer.querySelector('#root')\n   : document.querySelector('#root');\n const rootDomGetter = () => mountDOM;\n const ThemeProvider = () => (\n   <ConfigProvider getPopupContainer={rootDomGetter}>{container}</ConfigProvider>\n );\n return React.createElement(ThemeProvider, null, container);\n}\n\nmessage.config({\n getContainer: containerPros.container\n   ? () => containerPros.container.querySelector('#root')\n   : () => document.querySelector('#root'),\n});\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);